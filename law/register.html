<!DOCTYPE html>
<html>
<head>
  <title>Register - Store System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
  <h3>üìù Create New Account</h3>
  <form id="registerForm">
    <div class="mb-3">
      <label>Full Name</label>
      <input type="text" id="fullname" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Username</label>
      <input type="text" id="username" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Password</label>
      <input type="password" id="password" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Role</label>
      <select id="role" class="form-control">
        <option value="storekeeper">Storekeeper</option>
        <option value="cashier">Cashier</option>
        <option value="admin">Admin</option>
        <option value="owner">Owner</option>
      </select>
    </div>
    <button class="btn btn-primary">Register</button>
  </form>

  <div id="msg" class="mt-3"></div>

  <script>
    document.getElementById("registerForm").onsubmit = async (e) => {
      e.preventDefault();
      let res = await fetch("http://127.0.0.1:5000/api/register", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
          full_name: document.getElementById("fullname").value,
          username: document.getElementById("username").value,
          password: document.getElementById("password").value,
          role: document.getElementById("role").value
        })
      });
      let data = await res.json();
      if(res.ok){
        document.getElementById("msg").innerHTML = `<span class="text-success">${data.msg}</span>`;
        setTimeout(()=> window.location.href = "login.html", 1500);
      } else {
        document.getElementById("msg").innerHTML = `<span class="text-danger">${data.msg}</span>`;
      }
    };
  </script>
</body>
</html>
